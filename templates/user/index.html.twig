{% extends 'base.html.twig' %}

{% block body %}
    <p>MON ESPACE UTILISATEUR <strong>{{ app.user.pseudo }}</strong></p>
    <section>
        <div>
            <button type="button" class="" onclick="window.location.href='{{ path('app_create') }}'">
				Creer un nouvel article
			</button>
        </div>
    </section>
    <section>
        <div>
            <p class ="title-user">Mes Articles Publiés</p>
            <div class="cards">
                {% for article in articlesPublies %}
                    <div class="card horizontal-card">
                        
                            <div class="card-img-container">
                                <img src="{{ asset(article.photo ? 'images/photos/' ~ article.photo : 'images/photos/placeholder.jpg') }}" alt="{{ article.titre }}">
                            </div>
                        
                        <div class="card-content">
                            <div>
                                <span class="badge">{{ article.categorie.libelle }}</span>
                                <button type="button" class="" onclick="window.location.href='{{ path('app_edit', {id: article.id}) }}'">Editer</button>
                            </div>
                            <h5>{{ article.titre }}</h5>
                            
                            <div class="meta">
                                <small>{{ article.auteur.pseudo }}</small> •
                                <small>{{ article.dateModif ? article.dateModif|date('d/m/Y') : article.dateCrea|date('d/m/Y') }}</small>
                            </div>

                            <p class="chapeau">
                                {{ article.chapeau|length > 150 ? article.chapeau|slice(0, 85) ~ '...' : article.chapeau }}
                            </p>

                            <a class="read-more" href="{{ path('article_show', {id: article.id}) }}">
                                Lire la suite {{ ux_icon('tabler:arrow-big-right',{class: "icone-symfony"}) }}
                            </a>

                            <div class="stats">
                                <span>{{ ux_icon('tabler:message-circle',{class: "icone-symfony"}) }} {{ article.commentaires|length }}</span>
                                <span>{{ ux_icon('tabler:heart',{class: "icone-symfony"}) }} {{ article.likes|length }}</span>
                            </div>
                        </div>
                    </div>
                {% else %}
                    <p>Aucun article publié pour le moment.</p>
                {% endfor %}
            </div>
        </div>
    </section>
    <section>
        <div>
            <p class ="title-user">Mes Articles Non Publiés</p>
            <div class="cards">
                {% for article in articlesNonPublies %}
                    <div class="card horizontal-card">
                        
                            <div class="card-img-container">
                                <img src="{{ asset(article.photo ? 'images/photos/' ~ article.photo : 'images/photos/placeholder.jpg') }}" alt="{{ article.titre }}">
                            </div>
                        
                        <div class="card-content">
                            <div>
                                <span class="badge">{{ article.categorie.libelle }}</span>
                                <button type="button" class="" onclick="window.location.href='{{ path('app_edit', {id: article.id}) }}'">Editer</button>
                            </div>
                            <h5>{{ article.titre }}</h5>
                            
                            <div class="meta">
                                <small>{{ article.auteur.pseudo }}</small> •
                                <small>{{ article.dateModif ? article.dateModif|date('d/m/Y') : article.dateCrea|date('d/m/Y') }}</small>
                            </div>

                            <p class="chapeau">
                                {{ article.chapeau|length > 150 ? article.chapeau|slice(0, 80) ~ '...' : article.chapeau }}
                            </p>

                            <a class="read-more" href="{{ path('article_show', {id: article.id}) }}">
                                Lire la suite {{ ux_icon('tabler:arrow-big-right',{class: "icone-symfony"}) }}
                            </a>

                            <div class="stats">
                                <span>{{ ux_icon('tabler:message-circle',{class: "icone-symfony"}) }} {{ article.commentaires|length }}</span>
                                <span>{{ ux_icon('tabler:heart',{class: "icone-symfony"}) }} {{ article.likes|length }}</span>
                            </div>
                        </div>
                    </div>
                {% else %}
                    <p>Aucun article publié pour le moment.</p>
                {% endfor %}
            </div>
        </div>    
    </section>
{% endblock %}
