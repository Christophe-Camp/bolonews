{% extends 'base_public.html.twig' %}

{% block body %}
    <main>
        <section class="search-section">
            <div>
                {{ form_start(form, { method: 'get', attr: { class: 'search-form' } }) }}
                {{ form_widget(form.recherche) }}
                    <button type="submit">üîç</button>
                {{ form_end(form) }}            
            </div>
            <hr class="separator">

            <nav class="categories">
                {% for categorie in categories %}
                    <a href="{{ path('app_articles', { categorie: categorie.id }) }}">
                        {{ categorie.libelle }}
                    </a>
                {% endfor %}
            </nav>
        </section>
        <section>
            <div class="cards">
                    {% for article in articles %}
                        <div class="card horizontal-card">
                            <div class="card-img-container">
                                <img src="{{ asset(article.photo ? 'images/photos/' ~ article.photo : 'images/photos/placeholder.jpg') }}" alt="{{ article.titre }}">
                            </div>
                            <div class="card-content">
                                <span class="badge">{{ article.categorie.libelle }}</span>
                                <h5>{{ article.titre }}</h5>
                                <p class="chapeau">
                                    {{ article.chapeau|length > 150 ? article.chapeau|slice(0, 85) ~ '...' : article.chapeau }}
                                </p>
                                <a class="read-more" href="{{ path('article_show', {id: article.id}) }}">
                                    Lire la suite {{ ux_icon('tabler:arrow-big-right',{class: "icone-symfony"}) }}
                                </a>
                            </div>
                        </div>
                    {% else %}
                        <p>Aucun article publi√© pour le moment.</p>
                    {% endfor %}
        </section>
    </main>
{% endblock %}
